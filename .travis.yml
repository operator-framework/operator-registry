language: go
go:
- 1.13
sudo: true
os:
- linux
- osx
- windows
install:
- if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew install make; fi
- if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then sudo apt-get install make; fi
script:
- if [[ "$TRAVIS_OS_NAME" == "windows" ]]; then mingw32-make build; fi
- if [[ "$TRAVIS_OS_NAME" != "windows" ]]; then make unit build; fi
notifications:
  email: false
deploy:
  provider: releases
  api_key:
    secure: tGR2GnmidR2yDiajtooER0lZZkeWI6+Dbv7ctOq7fzyK+u+LdP4Xmw/aM+qfC26ylx1IFTW43pHhVCi1m5yH4Vb4sjdh4Okjkc0ZkwQzAzHFiBQ/LCHFxTBKMIdKWRsI1rNQ1wlJnFDorlVhEO2xqN59gguE33RR13H8zeFyGdtVy9TtCwhfiEj0XqlIqEeB7NQm6nn1/I0d0c9THX+URM7jMRy47jS0fQbDQUmDkgGqybgMg9f/dpPAPoaf79/5kcPhZgmeNeeL0/IaUCgzYx3EPmwSo3E34uyCRXM8rJbb5uPZ2eTeX6y+p3NwD2LrNd6Rr8QzozoKafsher0EvHqJBi8Y+YqEh7va9UfosDj1xWoni1fqXt28k7fAcpqgQW6ynwvSi/aJ9PymKXZ5yz0d8iModI+9MIQcpdAuNCOTJuN7H2b334vgMvQQZR0VG5ACBxUXdQ3QrfYJlDc/nJ7z/HCckn2B4vvjFeysiBqsAlaVJC+R+cr75u1DZWhyMio2sYNCA21EYaBCs3GmiX/B+3NU0WT/b4Ub01JQZm9xNKARcvw1xXpnnclyanZ5//nEu7/my4pwZRGca6RjHEetSQLzgRjlOS6QBIX3odTrBA+x9oyutQMgTBJ83nSvfPudndwu/C0mAqyAghYd4kVqZK/7UCyUjPD9ZvEd40o=
  file_glob: true
  file: bin/**/*
  skip_cleanup: true
  on:
    repo: operator-framework/operator-registry
    tags: true